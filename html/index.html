<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
        <title>Inicio | Econergy by Omega</title>

        <!-- Favicon -->
        <link rel="shortcut icon" href="assets/images/logo/omega-logo.png">

        <!-- plugins css -->
        <link rel="stylesheet" href="assets/vendors/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="assets/vendors/PACE/themes/blue/pace-theme-minimal.css" />
        <link rel="stylesheet" href="assets/vendors/perfect-scrollbar/css/perfect-scrollbar.min.css" />

        <!-- page plugins css -->

        <!-- core css -->
        <link href="assets/css/ei-icon.css" rel="stylesheet">
        <link href="assets/css/themify-icons.css" rel="stylesheet">
        <link href="assets/css/font-awesome.min.css" rel="stylesheet">
        <link href="assets/css/animate.min.css" rel="stylesheet">
        <link href="assets/css/app.css" rel="stylesheet">
        <link href="assets/css/progress.css" rel="stylesheet">
        <link href="assets/css/progreso.css" rel="stylesheet">
        <link href="assets/css/welcome-text.css" rel="stylesheet">


        <script src="plotly.min.js"></script>

    </head>

    <body class="header-info side-nav-dark">
        <div class="app">
            <div class="layout">
                
                <!-- Side Nav START -->
                <div class="side-nav" id="sideNav">
                    <div class="side-nav-inner">
                        <div class="side-nav-logo">
                            <a href="" target="">
                                <div class="logo logo-dark" style="background-image: url('assets/images/logo/omega-logo.png')"></div>
                                <div class="logo logo-white" style="background-image: url('assets/images/logo/omega-logo.png')"></div>
                            </a>
                            <div class="mobile-toggle side-nav-toggle">
                                <a href="">
                                    <i class="ti-arrow-circle-left"></i>
                                </a>
                            </div>
                        </div>
                        <!--Inician contenidos laterales-->
                        <ul class="side-nav-menu scrollable">
                            <li class="nav-item active">
                                <a class="mrg-top-30" href="index.html">
                                    <span class="icon-holder">
                                        <i class="ti-home"></i>
                                    </span>
                                    <span class="title">Inicio</span>
                                </a>
                            </li>
                            <li class="nav-item active">
                                <a href="html/luz.html">
                                    <span class="icon-holder">
                                        <i class="ei-foggy"></i>
                                    </span>
                                    <span class="title">Luz</span>
                                </a>
                            </li>
                            <li class="nav-item active">
                                <a href="html/agua.html">
                                    <span class="icon-holder">
                                        <i class="ei-human-resources"></i>
                                    </span>
                                    <span class="title">Agua</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- Side Nav END -->

                <!-- Page Container START -->
                <div class="page-container">
                    <!-- Header START -->
                    <div class="header navbar">
                        <div class="header-container">
                            <ul class="nav-left">
                                <li>
                                    <a class="side-nav-toggle" href="javascript:void(0);">
                                        <i class="ti-view-grid"></i>
                                    </a>
                                </li>
                            </ul>
                            <ul class="nav-right">
                                <li>
                                    <a href="">
                                        <img src="assets/images/logo/omega-logo.png" height="45">
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                    <!-- Header END -->

                    <!-- Content Wrapper START -->
                    <div class="main-content">
                        <div class="container-fluid">


                            <!-- Your content goes here -->

                            <div class ="row">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="overlay-dark bg" style="
                                            background-image: url('assets/images/main/luz.jpg');                                            
                                            background-position-y: 80%;
                                            background-repeat: no-repeat;
                                            background-size: cover;
                                            object-fit: cover">
                                            <div class="card-block">
                                                <div class="mrg-top-130">
                                                    <h1 class="card-title" style="color:#ffffff"><b>Energía eléctrica</b></h1>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-block">
                                            <div class="text-center">
                                                <h1>El consumo actual de luz es de: <span id="datoLuzActual" style="color: red;"></span> kW/h</h1>
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div id="chartLuz"></div>
                                                        <script>
                                                            valorLuzActual = 0;
                                                            function getDataLuz() {
                                                                return valorLuzActual;
                                                            }  
                                                            Plotly.plot('chartLuz',[{
                                                                y:[getDataLuz()],
                                                                type:'line'
                                                            }]);
                                                            
                                                            var cnt = 0;
                                                            setInterval(function(){
                                                                Plotly.extendTraces('chartLuz',{ y:[[getDataLuz()]]}, [0]);
                                                                cnt++;
                                                                if(cnt > 500) {
                                                                    Plotly.relayout('chartLuz',{
                                                                        xaxis: {
                                                                            range: [cnt-500,cnt]
                                                                        }
                                                                    });
                                                                }
                                                            },1000);
                                                        </script>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            
                                            <div class="text-center">
                                                    <h2>El día de hoy has consumido:<span id="datoLuzTotal"></span> kW/h</h2>
                                                </div>
                                            <div class="row text-center">
                                                <div class="col">
                                                    <div class="mrg-top-40">
                                                        <a href="html/luz.html" class="btn btn-warning no-mrg-btm">Ver más sobre el consumo de electricidad</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-12">
                                    <div class="card">
                                        <div class="overlay-dark bg" style="
                                            background-image: url('assets/images/main/agua.jpg');                                            
                                            background-position-y: 80%;
                                            background-repeat: no-repeat;
                                            background-size: cover;
                                            object-fit: cover">
                                            <div class="card-block">
                                                <div class="mrg-top-130">
                                                    <h1 class="card-title" style="color:#ffffff"><b>Agua</b></h1>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-block">
                                            <div class="text-center">
                                                <h1>El consumo actual de agua es de: <span id="datoAguaActual" style="color: blue;"></span> litros/minuto</h1>
                                            </div>
                                            
                                            <div class="row">
                                                    <div class="col">
                                                        <div id="chartAgua"></div>
                                                            <script>
                                                                valorAguaActual = 0;
                                                                function getDataAgua() {
                                                                    return valorAguaActual;
                                                                }  
                                                                Plotly.plot('chartAgua',[{
                                                                    y:[getDataAgua()],
                                                                    type:'line'
                                                                }]);
                                                                
                                                                var cnt = 0;
                                                                setInterval(function(){
                                                                    Plotly.extendTraces('chartAgua',{ y:[[getDataAgua()]]}, [0]);
                                                                    cnt++;
                                                                    if(cnt > 500) {
                                                                        Plotly.relayout('chartAgua',{
                                                                            xaxis: {
                                                                                range: [cnt-500,cnt]
                                                                            }
                                                                        });
                                                                    }
                                                                },1000);
                                                            </script>
                                                        </div>
                                                    </div>
                                                </div>

                                            <div class="text-center">
                                                <h2>El día de hoy has consumido:<span id="datoAguaTotal"></span> litros</h2>
                                            </div>
                                            <div class="row text-center">
                                                <div class="col">
                                                    <div class="mrg-top-40">
                                                        <a href="html/agua.html" class="btn btn-info no-mrg-btm">Ver más sobre el consumo de agua</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    
                                    <div class="row">
                                        <div class="col">
                                            <div class="card">
                                                    <div class="card-block">
                                                        <div class="row">
                                                            <div class="col-12 text-center">
                                                                <p class="text-dark text-uppercase font-size-13"><b>Tu gasto mensual acumulado al momento es de:</b></p>
                                                                <h1 class="no-mrg-top text-primary font-size-30">$ <span id="datoGastoTotal">18,000</span></h1>
                                                                <span>A pagar el 31 de agosto de 2019</span>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            
                        </div>
                    </div>
                    <!-- Content Wrapper END -->

                    <!-- Footer START -->
                    <footer class="content-footer">
                        <div class="footer">
                            <div class="row">
                                <div class="col-7 text-right">
                                    <p>Se prohíbe la reproducción total o parcial sin previo y expreso consentimiento por escrito.</p>
                                    <p>D.R.© OMEGA, México, 2019.</p>
                                </div>  
                                <div class="col-5 center align-self-center">
                                    <a href="">Armando Roque</a>
                                    <span><b>|</b></span>
                                    <a href="">Guillermo García</a>
                                    <span><b>|</b></span>
                                    <a href="">Andrés Abundis</a>
                                    <span><b>|</b></span>
                                    <a href="">Adrián Montemayor</a>
                                </div>
                            </div>
                        </div>
                    </footer>
                    <!-- Footer END -->
                </div>
                <!-- Page Container END -->
            </div>
        </div>

        <!-- build:js assets/js/vendor.js -->
        <!-- plugins js -->
        <script src="assets/vendors/jquery/dist/jquery.min.js"></script>
        <script src="assets/vendors/popper.js/dist/umd/popper.min.js"></script>
        <script src="assets/vendors/bootstrap/dist/js/bootstrap.js"></script>
        <script src="assets/vendors/PACE/pace.min.js"></script>
        <script src="assets/vendors/perfect-scrollbar/js/perfect-scrollbar.jquery.js"></script>

        <script src="assets/js/progressbar.js"></script>


        <!-- endbuild -->

        <!-- build:js assets/js/app.min.js -->
        <!-- core js -->
        <script src="assets/js/app.js"></script>
        

        <script src="./assets/js/progreso.js"></script>
        <!--Aqui se pone el porcentaje completado,se puedo pasar como una division de (numero de paginas/total de paginas)-->
        <script type="text/javascript">show(.5)</script>

        <script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
        $(function () {
          var socket = io();
          socket.on('dato luz actual', function(msg){
            document.getElementById("datoLuzActual").innerHTML = msg;
            valorLuzActual = msg;
          });
          socket.on('dato luz total', function(msg){
            document.getElementById("datoLuzTotal").innerHTML = msg;
          });
          socket.on('dato agua actual', function(msg){
            document.getElementById("datoAguaActual").innerHTML = msg;
            valorAguaActual = msg;
          });
          socket.on('dato agua total', function(msg){
            document.getElementById("datoAguaTotal").innerHTML = msg;
          });
          socket.on('dato gasto total', function(msg){
            document.getElementById("datoGastoTotal").innerHTML = msg;
          });
        });
      </script>


        

        <!-- endbuild -->

        <!-- Insert your dependencies here -->

    </body>
</html>
